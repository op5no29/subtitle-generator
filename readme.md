# 動画・音声文字起こしアプリ

プロフェッショナル向けの動画・音声文字起こし・字幕生成ツールです。

## 機能

### 📹 動画字幕生成
- 動画ファイルから自動で字幕を生成
- カスタマイズ可能な字幕スタイル（フォント、位置、色）
- 字幕の動画への焼き込み
- SRTファイルのダウンロード
- 多言語翻訳対応

### 🎵 音声・動画文字起こし
- 高精度な音声認識
- 大きなファイルの自動分割処理
- タイムスタンプ付き文字起こし
- 複数出力形式（テキスト、JSON）
- リアルタイム翻訳

### 🎤 リアルタイム録音・文字起こし
- ブラウザベースの音声録音
- リアルタイム文字起こし
- 即座の翻訳対応

## 対応ファイル形式

### 動画ファイル
- MP4, AVI, MOV, MKV

### 音声ファイル
- MP3, WAV, M4A, AAC, FLAC

### 翻訳対応言語
- 日本語 ⇔ 英語
- 日本語 → 中国語
- 日本語 → 韓国語

## システム要件

### macOS
- macOS 10.14以降
- Python 3.8以降
- FFmpeg
- PortAudio

### 必要なAPIキー
- OpenAI API キー（Whisper使用）
- Anthropic API キー（Claude翻訳使用）

## インストール手順

### 1. システム依存関係のインストール

```bash
# Homebrewを使用してFFmpegとPortAudioをインストール
brew install ffmpeg portaudio python
```

### 2. プロジェクトのクローン

```bash
git clone <repository-url>
cd subtitle_app
```

### 3. 仮想環境の作成と有効化

```bash
# 仮想環境作成
python3 -m venv venv

# 仮想環境有効化
source venv/bin/activate
```

### 4. Pythonパッケージのインストール

```bash
pip install -r requirements.txt
```

### 5. 環境変数の設定

```bash
# .envファイルを作成
cp .env.template .env

# .envファイルを編集してAPIキーを設定
nano .env
```

`.env`ファイルの内容例：
```bash
OPENAI_API_KEY=sk-your-openai-key-here
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here
```

### 6. APIキーの取得

#### OpenAI API キー
1. [OpenAI Platform](https://platform.openai.com/api-keys)にアクセス
2. アカウント作成またはログイン
3. 新しいAPIキーを生成
4. `.env`ファイルに追加

#### Anthropic API キー
1. [Anthropic Console](https://console.anthropic.com/)にアクセス
2. アカウント作成またはログイン
3. 新しいAPIキーを生成
4. `.env`ファイルに追加

## アプリケーションの起動

```bash
# 仮想環境が有効化されていることを確認
source venv/bin/activate

# Streamlitアプリ起動
streamlit run app.py
```

ブラウザが自動で開き、`http://localhost:8501`でアプリにアクセスできます。

## 使用方法

### 動画字幕生成
1. 「📹 動画字幕生成」タブを選択
2. 動画ファイルをアップロード（ドラッグ&ドロップ対応）
3. 字幕設定を調整（フォントサイズ、位置、色）
4. 翻訳オプションを選択（必要に応じて）
5. 「🚀 字幕生成開始」ボタンをクリック
6. 処理完了後、結果をダウンロード

### 音声文字起こし
1. 「🎵 音声文字起こし」タブを選択
2. 音声または動画ファイルをアップロード
3. 出力形式とタイムスタンプ設定を選択
4. 翻訳オプションを選択（必要に応じて）
5. 「🚀 文字起こし開始」ボタンをクリック
6. 結果をコピーまたはダウンロード

### リアルタイム録音
1. 「🎤 リアルタイム録音」タブを選択
2. 録音設定を調整
3. 「🔴 録音開始」ボタンをクリック
4. 音声を録音
5. 「⏹️ 録音停止」ボタンをクリック
6. 自動で文字起こし実行

## 特徴

### 大きなファイルの対応
- 25MB以上のファイルは自動で分割処理
- 最大数GB のファイルに対応
- メモリ効率的な処理

### 高品質な文字起こし
- OpenAI Whisper APIによる高精度認識
- 日本語に最適化された処理
- ノイズ除去と音声最適化

### プロフェッショナルUI
- 直感的な日本語インターフェース
- リアルタイム進行状況表示
- レスポンシブデザイン

### セキュリティ
- ファイルは一時的に処理後自動削除
- APIキーは環境変数で安全に管理

## トラブルシューティング

### FFmpegエラー
```bash
# FFmpegが正しくインストールされているか確認
ffmpeg -version

# 再インストール
brew reinstall ffmpeg
```

### PyAudioエラー
```bash
# PortAudioを再インストール
brew reinstall portaudio

# PyAudioを再インストール
pip uninstall pyaudio
pip install pyaudio
```

### API接続エラー
- APIキーが正しく設定されているか確認
- インターネット接続を確認
- API利用制限に達していないか確認

### メモリエラー
- 大きなファイルの場合、十分なメモリがあるか確認
- 他のアプリケーションを終了してメモリを解放

## パフォーマンス最適化

### 推奨設定
- RAM: 8GB以上
- ストレージ: 10GB以上の空き容量
- CPU: Intel i5相当以上

### ファイルサイズ制限
- 動画ファイル: 最大5GB
- 音声ファイル: 最大2GB
- 録音時間: 最大12時間

## ライセンス

このプロジェクトは個人利用・商用利用可能です。

## サポート

問題が発生した場合：
1. エラーメッセージを確認
2. ログファイルをチェック
3. APIキーと設定を再確認
4. 必要に応じて issue を作成

## 更新履歴

### v1.0.0 (2025年)
- 初回リリース
- 基本的な文字起こし・翻訳機能
- 動画字幕生成機能
- リアルタイム録音機能